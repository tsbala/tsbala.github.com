 <html>
 <head>
 </head>
 <body>
    <div id="fbauth"></div>
	<p id="UserName"></p>
	<p id="UserId"></p>
	<p><img id="UserImage" /></p>
	<p id="UserEmail"></p>
	<p id="accessToken"></p>
	<div id="fb-root"></div>
	<script>
	  var appId = "155271981196630";
	  window.fbAsyncInit = function() {
		FB.init({
		  appId  : appId,
		  status : true, // check login status
		  cookie : true, // enable cookies to allow the server to access the session
		  xfbml  : true  // parse XFBML
		});

		FB.getLoginStatus(updateButton);
		FB.Event.subscribe('auth.statusChange', updateButton);		
	  };

	  (function() {
		var e = document.createElement('script');
		e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
		e.async = true;
		document.getElementById('fb-root').appendChild(e);
	  }());
	  
		function updateButton(response) {
		  console.info('Updating Button', response);

		  if (response.session) {
			accessToken.innerText = response.session.access_token;
			FB.api('/me', function(user) {
				if(user != null) {
					var image = document.getElementById('UserImage');
					image.src = 'http://graph.facebook.com/' + user.id + '/picture';
					UserName.innerHTML = user.name;
					UserId.innerHTML = user.id;
					UserEmail.innerHTML = user.email;
				}
			});		  
		  } else {
			fbauth.innerHTML = '<fb:login-button onlogin="updateButton" perms="email,user_checkins">Login with Facebook</fb:login-button>';
    	  };
		}
	</script>	
</body>
	<!--
    <head>
        <title>Client Flow Example</title>
    </head>
    <body>
        <script>

			var appId = "155271981196630";

			if(window.location.hash.length == 0)
			{
				url = "https://www.facebook.com/dialog/oauth?client_id=" + 
						 appId  + "&redirect_uri=" + window.location +
						 "&response_type=token";
				window.location = url;

			} else {
				accessToken = window.location.hash.substring(1);
				graphUrl = "https://graph.facebook.com/me?" + accessToken +
							"&callback=displayUser"

				//use JSON-P to call the graph
				var script = document.createElement("script");
				script.src = graphUrl;
				document.body.appendChild(script);  
			}

			function displayUser(user) {
				userName.innerText = user.name;
				userId.innerText = user.id;
			}
        </script>
        <p id="userName"></p>
		<p id="userId"></p>
		<p id="accessToken"></p>
    </body>
	-->
</html>