<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>	
</head>
<body>
	<div data-role='header'>
		JustGiving Mobile
	</div>
	
	<div data-role='content'>
		<div id='login'>
			<div class='fb-login-button' data-show-faces='false' data-width='200' data-max-rows='1'></div>	
		</div>
		
		<div id='logout'>
		   <p><button  onClick='FB.logout();'>Logout</button></p>
		</div>
	</div>

	<div id='fb-root'></div>
	<script>
	  (function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=269225433102391";
		fjs.parentNode.insertBefore(js, fjs);
	  }(document, 'script', 'facebook-jssdk'));	   

	  window.fbAsyncInit = function() {
	   FB.init({
			appId  : '269225433102391',
			status : true,
			cookie : true,
			xfbml  : true,
			oauth  : true
	   });
	   
	   FB.Event.subscribe('auth.authResponseChange', function(response) {
	      alert('In here');
	      document.body.className = response.authResponse ? 'connected' : 'not_connected';
		  console.log(response);
	      if (response.authResponse) {
			$('#logout').show();
		  } else {
		    $('#login').show();
		  }
	   });
	 }
	   
	</script>
	
	<script>
		(function($) {
			$(function() {
			    $('#login').hide();
				$('#logout').hide();
			});
		})(jQuery);
	</script>
</body>
</html>
